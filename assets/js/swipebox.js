(function(e,i,t,s){t.swipebox=function(o,a){var r,n={useCSS:true,useSVG:true,initialIndexOnArray:0,removeBarsOnMobile:true,hideCloseButtonOnMobile:false,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,nextSlide:null,prevSlide:null,loopAtEnd:false,autoplayVideos:false,queryStringData:{},toggleClassOnLoad:""},l=this,d=[],f,p=o.selector,g=t(p),c=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),h=c!==null||i.createTouch!==s||"ontouchstart"in e||"onmsgesturechange"in e||navigator.msMaxTouchPoints,u=!!i.createElementNS&&!!i.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,b=e.innerWidth?e.innerWidth:t(e).width(),m=e.innerHeight?e.innerHeight:t(e).height(),w=0,v='<div id="swipebox-overlay">					<div id="swipebox-container">						<div id="swipebox-slider"></div>						<div id="swipebox-top-bar">							<div id="swipebox-title"></div>						</div>						<div id="swipebox-bottom-bar">							<div id="swipebox-arrows">								<a id="swipebox-prev"></a>								<a id="swipebox-next"></a>							</div>						</div>						<a id="swipebox-close"></a>					</div>			</div>';l.settings={};t.swipebox.close=function(){r.closeSlide()};t.swipebox.extend=function(){return r};l.init=function(){l.settings=t.extend({},n,a);if(t.isArray(o)){d=o;r.target=t(e);r.init(l.settings.initialIndexOnArray)}else{t(i).on("click",p,function(e){if(e.target.parentNode.className==="slide current"){return false}if(!t.isArray(o)){r.destroy();f=t(p);r.actions()}d=[];var i,s,a;if(!a){s="data-rel";a=t(this).attr(s)}if(!a){s="rel";a=t(this).attr(s)}if(a&&a!==""&&a!=="nofollow"){f=g.filter("["+s+'="'+a+'"]')}else{f=t(p)}f.each(function(){var e=null,i=null;if(t(this).attr("title")){e=t(this).attr("title")}if(t(this).attr("href")){i=t(this).attr("href")}d.push({href:i,title:e})});i=f.index(t(this));e.preventDefault();e.stopPropagation();r.target=t(e.target);r.init(i)})}};r={init:function(e){if(l.settings.beforeOpen){l.settings.beforeOpen()}this.target.trigger("swipebox-start");t.swipebox.isOpen=true;this.build();this.openSlide(e);this.openMedia(e);this.preloadMedia(e+1);this.preloadMedia(e-1);if(l.settings.afterOpen){l.settings.afterOpen()}},build:function(){var e=this,i;t("body").append(v);if(u&&l.settings.useSVG===true){i=t("#swipebox-close").css("background-image");i=i.replace("png","svg");t("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":i})}if(c&&l.settings.removeBarsOnMobile){t("#swipebox-bottom-bar, #swipebox-top-bar").remove()}t.each(d,function(){t("#swipebox-slider").append('<div class="slide"></div>')});e.setDim();e.actions();if(h){e.gesture()}e.keyboard();e.animBars();e.resize()},setDim:function(){var i,s,o={};if("onorientationchange"in e){e.addEventListener("orientationchange",function(){if(e.orientation===0){i=b;s=m}else if(e.orientation===90||e.orientation===-90){i=m;s=b}},false)}else{i=e.innerWidth?e.innerWidth:t(e).width();s=e.innerHeight?e.innerHeight:t(e).height()}o={width:i,height:s};t("#swipebox-overlay").css(o)},resize:function(){var i=this;t(e).resize(function(){i.setDim()}).resize()},supportTransition:function(){var e="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t;for(t=0;t<e.length;t++){if(i.createElement("div").style[e[t]]!==s){return e[t]}}return false},doCssTrans:function(){if(l.settings.useCSS&&this.supportTransition()){return true}},gesture:function(){var e=this,i,s,o,a,r,n,l=false,f=false,p=10,g=50,c={},h={},u={inProgress:false,lastZoom:100,overZoom:false},m=t("#swipebox-top-bar, #swipebox-bottom-bar"),v=t("#swipebox-slider");m.addClass("visible-bars");e.setTimeout();t("body").bind("touchstart",function(e){t(this).addClass("touching");i=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current"));h=e.originalEvent.targetTouches[0];c.pageX=e.originalEvent.targetTouches[0].pageX;c.pageY=e.originalEvent.targetTouches[0].pageY;if(e.originalEvent.targetTouches.length>1){u.inProgress=true;u.startZoom=u.lastZoom;u.startDistance=Math.sqrt(Math.pow(e.originalEvent.targetTouches[0].pageX-e.originalEvent.targetTouches[1].pageX,2)+Math.pow(e.originalEvent.targetTouches[0].pageY-e.originalEvent.targetTouches[1].pageY,2));if(u.lastZoom==100){u.marginTop=0;u.marginLeft=0;u.diffHeight=0;u.diffWidth=0}}else{u.inProgress=false}if(!u.inProgress&&!u.overZoom){t("#swipebox-slider").css({"-webkit-transform":"translate3d("+w+"%, 0, 0)",transform:"translate3d("+w+"%, 0, 0)"})}t(".touching").bind("touchmove",function(e){e.preventDefault();e.stopPropagation();h=e.originalEvent.targetTouches[0];if(u.inProgress){var m=Math.sqrt(Math.pow(e.originalEvent.targetTouches[0].pageX-e.originalEvent.targetTouches[1].pageX,2)+Math.pow(e.originalEvent.targetTouches[0].pageY-e.originalEvent.targetTouches[1].pageY,2));var x=u.startZoom*(1+(m-u.startDistance)/u.startDistance);x=Math.max(100,x);var T=u.lastZoom;var C=u.diffHeight;var y=u.diffWidth;u.lastZoom=x;t("#swipebox-slider .current img").css({"max-width":x+"%","max-height":x+"%"});u.diffHeight=Math.max(0,t("#swipebox-slider .current img").height()-t("#swipebox-slider .current").height());u.diffWidth=Math.max(0,t("#swipebox-slider .current img").width()-t("#swipebox-slider .current").width());u.overZoom=false;if(u.diffHeight>0){u.marginTop+=-(u.diffHeight-C)/2;u.marginTop=Math.min(0,u.marginTop);u.marginTop=Math.max(-u.diffHeight,u.marginTop);u.overZoom=true}else{u.marginTop=0}if(u.diffWidth>0){u.marginLeft+=-(u.diffWidth-y)/2;u.marginLeft=Math.min(0,u.marginLeft);u.marginLeft=Math.max(-u.diffWidth,u.marginLeft);u.overZoom=true}else{u.marginLeft=0}t("#swipebox-slider .current img").css({"margin-top":u.marginTop+"px","margin-left":u.marginLeft+"px"});if(C==u.diffHeight&&y==u.diffWidth){u.lastZoom=T;u.diffHeight=C;u.diffWidth=y}return}else if(u.overZoom){u.lastMarginTop=u.marginTop+h.pageY-c.pageY;u.lastMarginTop=Math.min(0,u.lastMarginTop);u.lastMarginTop=Math.max(-u.diffHeight,u.lastMarginTop);u.lastMarginLeft=u.marginLeft+h.pageX-c.pageX;u.lastMarginLeft=Math.min(0,u.lastMarginLeft);u.lastMarginLeft=Math.max(-u.diffWidth,u.lastMarginLeft);t("#swipebox-slider .current img").css({"margin-top":u.lastMarginTop+"px","margin-left":u.lastMarginLeft+"px"});return}if(!f){r=o;o=h.pageY-c.pageY;if(Math.abs(o)>=g||l){var M=.75-Math.abs(o)/v.height();v.css({top:o+"px"});v.css({opacity:M});l=true}}a=s;s=h.pageX-c.pageX;n=s*100/b;if(!f&&!l&&Math.abs(s)>=p){t("#swipebox-slider").css({"-webkit-transition":"",transition:""});f=true}if(f){if(0<s){if(0===i){t("#swipebox-overlay").addClass("leftSpringTouch")}else{t("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");t("#swipebox-slider").css({"-webkit-transform":"translate3d("+(w+n)+"%, 0, 0)",transform:"translate3d("+(w+n)+"%, 0, 0)"})}}else if(0>s){if(d.length===i+1){t("#swipebox-overlay").addClass("rightSpringTouch")}else{t("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");t("#swipebox-slider").css({"-webkit-transform":"translate3d("+(w+n)+"%, 0, 0)",transform:"translate3d("+(w+n)+"%, 0, 0)"})}}}});return false}).bind("touchend",function(i){i.preventDefault();i.stopPropagation();if(!u.inProgress&&u.overZoom){u.marginTop=u.lastMarginTop;u.marginLeft=u.lastMarginLeft}if(u.inProgress||u.overZoom){t(".touching").off("touchmove").removeClass("touching");return}t("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"});o=h.pageY-c.pageY;s=h.pageX-c.pageX;n=s*100/b;if(l){l=false;if(Math.abs(o)>=2*g&&Math.abs(o)>Math.abs(r)){var d=o>0?v.height():-v.height();v.animate({top:d+"px",opacity:0},300,function(){e.closeSlide()})}else{v.animate({top:0,opacity:1},300)}}else if(f){f=false;if(s>=p&&s>=a){if(u.lastZoom>100){t("#swipebox-slider .current img").css({"max-width":"100%","max-height":"100%","margin-top":"","margin-left":""});u.lastZoom=100}e.getPrev()}else if(s<=-p&&s<=a){if(u.lastZoom>100){t("#swipebox-slider .current img").css({"max-width":"100%","max-height":"100%","margin-top":"","margin-left":""});u.lastZoom=100}e.getNext()}}else{if(!m.hasClass("visible-bars")){e.showBars();e.setTimeout()}else{e.clearTimeout();e.hideBars()}}t("#swipebox-slider").css({"-webkit-transform":"translate3d("+w+"%, 0, 0)",transform:"translate3d("+w+"%, 0, 0)"});t("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");t(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(l.settings.hideBarsDelay>0){var i=this;i.clearTimeout();i.timeout=e.setTimeout(function(){i.hideBars()},l.settings.hideBarsDelay)}},clearTimeout:function(){e.clearTimeout(this.timeout);this.timeout=null},showBars:function(){var e=t("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){e.addClass("visible-bars")}else{t("#swipebox-top-bar").animate({top:0},500);t("#swipebox-bottom-bar").animate({bottom:0},500);setTimeout(function(){e.addClass("visible-bars")},1e3)}},hideBars:function(){var e=t("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){e.removeClass("visible-bars")}else{t("#swipebox-top-bar").animate({top:"-50px"},500);t("#swipebox-bottom-bar").animate({bottom:"-50px"},500);setTimeout(function(){e.removeClass("visible-bars")},1e3)}},animBars:function(){var e=this,i=t("#swipebox-top-bar, #swipebox-bottom-bar");i.addClass("visible-bars");e.setTimeout();t("#swipebox-slider").click(function(){if(!i.hasClass("visible-bars")){e.showBars();e.setTimeout()}});t("#swipebox-bottom-bar").hover(function(){e.showBars();i.addClass("visible-bars");e.clearTimeout()},function(){if(l.settings.hideBarsDelay>0){i.removeClass("visible-bars");e.setTimeout()}})},keyboard:function(){var i=this;t(e).bind("keyup",function(e){e.preventDefault();e.stopPropagation();if(e.keyCode===37){i.getPrev()}else if(e.keyCode===39){i.getNext()}else if(e.keyCode===27){i.closeSlide()}})},actions:function(){var e=this,i="touchend click";if(d.length<2){t("#swipebox-bottom-bar").hide();if(s===d[1]){t("#swipebox-top-bar").hide()}}else{t("#swipebox-prev").bind(i,function(i){i.preventDefault();i.stopPropagation();e.getPrev();e.setTimeout()});t("#swipebox-next").bind(i,function(i){i.preventDefault();i.stopPropagation();e.getNext();e.setTimeout()})}t("#swipebox-close").bind(i,function(){e.closeSlide()})},setSlide:function(e,i){i=i||false;var s=t("#swipebox-slider");w=-e*100;if(this.doCssTrans()){s.css({"-webkit-transform":"translate3d("+-e*100+"%, 0, 0)",transform:"translate3d("+-e*100+"%, 0, 0)"})}else{s.animate({left:-e*100+"%"})}t("#swipebox-slider .slide").removeClass("current");t("#swipebox-slider .slide").eq(e).addClass("current");this.setTitle(e);if(i){s.fadeIn()}t("#swipebox-prev, #swipebox-next").removeClass("disabled");if(e===0){t("#swipebox-prev").addClass("disabled")}else if(e===d.length-1&&l.settings.loopAtEnd!==true){t("#swipebox-next").addClass("disabled")}},openSlide:function(i){t("html").addClass("swipebox-html");if(h){t("html").addClass("swipebox-touch");if(l.settings.hideCloseButtonOnMobile){t("html").addClass("swipebox-no-close-button")}}else{t("html").addClass("swipebox-no-touch")}t(e).trigger("resize");this.setSlide(i,true)},preloadMedia:function(e){var i=this,t=null;if(d[e]!==s){t=d[e].href}if(!i.isVideo(t)){setTimeout(function(){i.openMedia(e)},1e3)}else{i.openMedia(e)}},openMedia:function(e){var i=this,o,a;if(d[e]!==s){o=d[e].href}if(e<0||e>=d.length){return false}a=t("#swipebox-slider .slide").eq(e);if(!i.isVideo(o)){a.addClass("slide-loading");i.loadMedia(o,function(){a.removeClass("slide-loading");a.html(this)})}else{a.html(i.getVideo(o))}},setTitle:function(e){var i=null;t("#swipebox-title").empty();if(d[e]!==s){i=d[e].title}if(i){t("#swipebox-top-bar").show();t("#swipebox-title").append(i)}else{t("#swipebox-top-bar").hide()}},isVideo:function(e){if(e){if(e.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/vimeo\.com\/([0-9]*)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)){return true}if(e.toLowerCase().indexOf("swipeboxvideo=1")>=0){return true}}},parseUri:function(e,s){var o=i.createElement("a"),a={};o.href=decodeURIComponent(e);if(o.search){a=JSON.parse('{"'+o.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')}if(t.isPlainObject(s)){a=t.extend(a,s,l.settings.queryStringData)}return t.map(a,function(e,i){if(e&&e>""){return encodeURIComponent(i)+"="+encodeURIComponent(e)}}).join("&")},getVideo:function(e){var i="",t=e.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),s=e.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),o=e.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),a="";if(t||s){if(s){t=s}a=r.parseUri(e,{autoplay:l.settings.autoplayVideos?"1":"0",v:""});i='<iframe width="560" height="315" src="//'+t[1]+"/embed/"+t[2]+"?"+a+'" frameborder="0" allowfullscreen></iframe>'}else if(o){a=r.parseUri(e,{autoplay:l.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:l.settings.vimeoColor});i='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+o[1]+"?"+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else{i='<iframe width="560" height="315" src="'+e+'" frameborder="0" allowfullscreen></iframe>'}return'<div class="swipebox-video-container" style="max-width:'+l.settings.videoMaxWidth+'px"><div class="swipebox-video">'+i+"</div></div>"},loadMedia:function(e,i){if(e.trim().indexOf("#")===0){i.call(t("<div>",{"class":"swipebox-inline-container"}).append(t(e).clone().toggleClass(l.settings.toggleClassOnLoad)))}else{if(!this.isVideo(e)){var s=t("<img>").on("load",function(){i.call(s)});s.attr("src",e)}}},getNext:function(){var e=this,i,s=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current"));if(s+1<d.length){i=t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",i);s++;e.setSlide(s);e.preloadMedia(s+1);if(l.settings.nextSlide){l.settings.nextSlide()}}else{if(l.settings.loopAtEnd===true){i=t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");t("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",i);s=0;e.preloadMedia(s);e.setSlide(s);e.preloadMedia(s+1);if(l.settings.nextSlide){l.settings.nextSlide()}}else{t("#swipebox-overlay").addClass("rightSpring");setTimeout(function(){t("#swipebox-overlay").removeClass("rightSpring")},500)}}},getPrev:function(){var e=t("#swipebox-slider .slide").index(t("#swipebox-slider .slide.current")),i;if(e>0){i=t("#swipebox-slider .slide").eq(e).contents().find("iframe").attr("src");t("#swipebox-slider .slide").eq(e).contents().find("iframe").attr("src",i);e--;this.setSlide(e);this.preloadMedia(e-1);if(l.settings.prevSlide){l.settings.prevSlide()}}else{t("#swipebox-overlay").addClass("leftSpring");setTimeout(function(){t("#swipebox-overlay").removeClass("leftSpring")},500)}},nextSlide:function(){},prevSlide:function(){},closeSlide:function(){t("html").removeClass("swipebox-html");t("html").removeClass("swipebox-touch");t(e).trigger("resize");this.destroy()},destroy:function(){t(e).unbind("keyup");t("body").unbind("touchstart");t("body").unbind("touchmove");t("body").unbind("touchend");t("#swipebox-slider").unbind();t("#swipebox-overlay").remove();if(!t.isArray(o)){o.removeData("_swipebox")}if(this.target){this.target.trigger("swipebox-destroy")}t.swipebox.isOpen=false;if(l.settings.afterClose){l.settings.afterClose()}}};l.init()};t.fn.swipebox=function(e){if(!t.data(this,"_swipebox")){var i=new t.swipebox(this,e);this.data("_swipebox",i)}return this.data("_swipebox")}})(window,document,jQuery);